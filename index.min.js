/*!
 * time-cd.js(v1.0.0)
 * A CountDown handler, 一个js的倒计时类。
 */
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=function(t){return"function"==typeof t},s=function(t){return"number"==typeof t&&!Number.isNaN(t)&&Number.isFinite(t)};function i(i,h,e){var n,r=this;t(i)?e=i:t(h)&&(e=h),n=h,h="[object Object]"===Object.prototype.toString.call(n)?h:{},this.options=h,this.initTime=s(i)?i:null,this.restTime=this.time,this.interval=s(h.interval)?h.interval:1e3,this.autoStart=!1!==h.autoStart,this.cdType=["d","h","m","s"].indexOf(h.cdType)>-1?h.cdType:"h",this.running=!1,this.destoryed=!1,this.completed=!1,this.tickTimes=0,this.restDays=null,this.restHours=null,this.restMinuts=null,this.restSeconds=null,this.d="-",this.h="-",this.m="-",this.s="-",this.dd="--",this.hh="--",this.mm="--",this.ss="--",this.ms="-:-",this.hms="-:-:-",this.mmss="--:--",this.hhmmss="--:--:--",this.timerId=null,this.start=function(){var t=this;this.destoryed||(this.running=!0,this.interval>=0&&this.restTime>=this.interval?this.timerId=setInterval((function(){return t.tick()}),this.interval):this.setComplete())},this.stop=function(){clearInterval(this.timerId),this.running=!1},this.destory=function(){clearInterval(this.timerId),this.running=!1,this.destoryed=!0},this.tick=function(){this.tickTimes++,this.restTime>this.interval?(this.restTime-=this.interval,this.setValue()):(this.restTime=0,this.setValue(),this.setComplete()),t(this.onTick)&&this.onTick(this),t(e)&&e(this)},this.setValue=function(){var t=this;if((!this.restTime||this.restTime<0)&&(this.restTime=0),this.restSeconds=Math.floor(this.restTime/1e3),this.restDays=Math.floor(this.restTime/864e5),this.restHours=Math.floor(this.restSeconds/3600),this.restMinuts=Math.floor(this.restSeconds/60),"d"===this.cdType){var s=Math.floor(this.restTime%864e5/1e3);this.d=this.restDays,this.h=Math.floor(s/3600),this.m=Math.floor(s%3600/60),this.s=Math.floor(s%60)}else"h"===this.cdType?(this.d=0,this.h=this.restHours,this.m=Math.floor(this.restSeconds%3600/60),this.s=Math.floor(this.restSeconds%60)):"m"===this.cdType?(this.d=0,this.h=0,this.m=this.restMinuts,this.s=Math.floor(this.restSeconds%60)):"s"===this.cdType&&(this.d=0,this.h=0,this.m=0,this.s=this.restSeconds);var i="dhms";i.substr(i.indexOf(this.cdType)).split("").forEach((function(s){var i=String(t[s]);t[s+s]=i.length<2?"00".concat(i).substr(-2):i})),this.ms="".concat(this.m,":").concat(this.s),this.mmss="".concat(this.mm,":").concat(this.ss),this.hms="".concat(this.h,":").concat(this.m,":").concat(this.s),this.hhmmss="".concat(this.hh,":").concat(this.mm,":").concat(this.ss),["dd","hh","mm","ss","ms","ms","hms","mmss","hhmmss"].forEach((function(s){t[s]=t[s].replace(/-/g,"0")}))},this.setComplete=function(){clearInterval(this.timerId),this.running=!1,this.completed=!0},s(this.time)&&(this.setValue(),this.autoStart&&setTimeout((function(){return r.start()})))}Object.defineProperty(i.prototype,"time",{get:function(){return this.initTime},set:function(t){s(t)&&(this.initTime=t,this.restTime=t)}}),module.exports=i}));
